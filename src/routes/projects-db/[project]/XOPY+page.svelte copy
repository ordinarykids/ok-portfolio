<script>
    import { page } from "$app/stores";
    import { onMount } from "svelte";

    let projects = [];
    let project = [];
    let error = null;

    $: console.log($page.params);

    const projectSlug = $page.params.project;

    onMount(async () => {
        const parseJSON = (resp) => (resp.json ? resp.json() : resp);
        const checkStatus = (resp) => {
            if (resp.status >= 200 && resp.status < 300) {
                return resp;
            }
            return parseJSON(resp).then((resp) => {
                throw resp;
            });
        };
        const headers = {
            "Content-Type": "application/json",
        };

        try {
            const res = await fetch("/project-data.json", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                },
            })
                .then(checkStatus)
                .then(parseJSON);
            projects = res;

            // project = projects.find(p => p.id == '1');
            // console.log('--')
            // console.log(project.attributes['title'])

            // console.log(project[1])
        } catch (e) {
            error = e;
        }
    });
</script>

<div
    class="container m-auto grid grid-cols-12 md:grid-cols-4 lg:grid-cols-12 gap-4"
>
    <div class="tile col-span-3">
        <h1>Aleph Mood Reel</h1>
        <h2>
            Real time coding using TouchDesigner to explore AI generated
            moodboards
        </h2>

        <h1>{projectSlug}</h1>
        <div>
            {#if error !== null}
                {error}
            {:else}
                <ul>
                    <h1></h1>

                    {#if project}
                        <p>--{project}--</p>
                    {/if}
                </ul>
            {/if}
        </div>

        <div class="underLine"></div>
        <h2>Info</h2>
        <p></p>
        <div class="">
            .
            <div>
                <h2>Tags</h2>
                <ul>
                    <li>Creative Direction</li>
                    <li>UX Design</li>
                    â‰¥
                    <li>Moodboards</li>
                    <li>Web Developement</li>
                </ul>
            </div>
            <div>
                <h2>Credits</h2>
                <ul>
                    <li>Jason Herring - Creative Director</li>
                    <li>Sony Maharjan- UX Designer</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="tile col-span-6">
        <img src="/aleph/peaceout.jpg" alt="collage" />
        <h5>
            Numerous collages mixing Midjounery generated images and traditonal
            design elements were developed during my leadership at Aleph.
        </h5>
        <iframe
            width="100%"
            height="600px"
            src="https://www.youtube.com/embed/FFpdC3Qbggg"
            title="Random Stuff on my Figma Boards"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
        ></iframe>
        <h5>
            Overview of the product photography we art directed and had
            photographed.
        </h5>
    </div>
</div>
